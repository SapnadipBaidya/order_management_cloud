"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkonline_order_application"] = self["webpackChunkonline_order_application"] || []).push([["src_componets_UploadAttachment_js"],{

/***/ "./src/componets/UploadAttachment.js":
/*!*******************************************!*\
  !*** ./src/componets/UploadAttachment.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InputFileUpload)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mui_material_styles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material/styles */ \"./node_modules/@mui/material/styles/styled.js\");\n/* harmony import */ var _mui_material_Button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material/Button */ \"./node_modules/@mui/material/Button/Button.js\");\n/* harmony import */ var _mui_lab_LoadingButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/lab/LoadingButton */ \"./node_modules/@mui/lab/LoadingButton/LoadingButton.js\");\n/* harmony import */ var _mui_icons_material_CloudUpload__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/icons-material/CloudUpload */ \"./node_modules/@mui/icons-material/CloudUpload.js\");\n/* harmony import */ var _mui_material_LinearProgress__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material/LinearProgress */ \"./node_modules/@mui/material/LinearProgress/LinearProgress.js\");\n/* harmony import */ var _mui_material_Box__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material/Box */ \"./node_modules/@mui/material/Box/Box.js\");\n/* harmony import */ var _mui_material_Typography__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material/Typography */ \"./node_modules/@mui/material/Typography/Typography.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"./node_modules/axios/lib/axios.js\");\n/* harmony import */ var _mui_icons_material_Save__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/icons-material/Save */ \"./node_modules/@mui/icons-material/Save.js\");\n/* harmony import */ var _mui_material_DialogTitle__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material/DialogTitle */ \"./node_modules/@mui/material/DialogTitle/DialogTitle.js\");\n/* harmony import */ var _mui_material_Dialog__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material/Dialog */ \"./node_modules/@mui/material/Dialog/Dialog.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst VisuallyHiddenInput = (0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_1__[\"default\"])('input')({\n  clip: 'rect(0 0 0 0)',\n  clipPath: 'inset(50%)',\n  height: 1,\n  overflow: 'hidden',\n  position: 'absolute',\n  bottom: 0,\n  left: 0,\n  whiteSpace: 'nowrap',\n  width: 1\n});\nfunction InputFileUpload() {\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [progress, setProgress] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [file, setFile] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [buttonLoading, setButtonLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [responseMessage, setResponseMessage] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n  const handleFileChange = event => {\n    const selectedFile = event.target.files[0];\n    if (selectedFile) {\n      setFile(selectedFile);\n      setLoading(true);\n      setProgress(0);\n      const reader = new FileReader();\n      reader.onprogress = e => {\n        if (e.lengthComputable) {\n          const percentLoaded = Math.round(e.loaded / e.total * 100);\n          setProgress(percentLoaded);\n        }\n      };\n      reader.onload = () => {\n        setLoading(false);\n      };\n      reader.onerror = () => {\n        console.error('Error reading file');\n        setLoading(false);\n      };\n      reader.readAsText(selectedFile);\n    }\n  };\n  const handleClose = () => {\n    setOpen(false);\n  };\n  const handleUpload = () => {\n    if (file) {\n      const formData = new FormData();\n      formData.append('file', file);\n      setButtonLoading(true);\n      axios__WEBPACK_IMPORTED_MODULE_2__[\"default\"].post('http://localhost:8080/uploadAttachments', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        },\n        onUploadProgress: progressEvent => {\n          const percentCompleted = Math.round(progressEvent.loaded * 100 / (progressEvent === null || progressEvent === void 0 ? void 0 : progressEvent.total));\n          setProgress(percentCompleted);\n        }\n      }).then(response => {\n        console.log('File uploaded successfully:', response);\n        if (response.status == 200) {\n          setFile(null);\n          setButtonLoading(false);\n          setOpen(true);\n          setResponseMessage(response.data);\n        }\n      }).catch(error => {\n        console.error('Error uploading file:', error);\n        setFile(null);\n        setButtonLoading(false);\n        setOpen(true);\n        setResponseMessage(\"error while uploding\");\n      });\n    }\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Box__WEBPACK_IMPORTED_MODULE_3__[\"default\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Button__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    component: \"label\",\n    role: undefined,\n    variant: \"contained\",\n    tabIndex: -1,\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_CloudUpload__WEBPACK_IMPORTED_MODULE_5__[\"default\"], null)\n  }, \"Upload file\", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(VisuallyHiddenInput, {\n    type: \"file\",\n    onChange: handleFileChange,\n    accept: \".txt,.pdf,.doc,.csv\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_lab_LoadingButton__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    loading: buttonLoading,\n    loadingPosition: \"start\",\n    startIcon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_icons_material_Save__WEBPACK_IMPORTED_MODULE_7__[\"default\"], null),\n    variant: \"contained\",\n    onClick: handleUpload,\n    disabled: !file,\n    sx: {\n      ml: 2\n    }\n  }, \"Save\"), loading && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Box__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    sx: {\n      width: '100%',\n      mt: 2\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_LinearProgress__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    variant: \"determinate\",\n    value: progress\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Typography__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\"\n  }, \"\".concat(progress, \"%\"))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Dialog__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n    open: open,\n    onClose: handleClose\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_DialogTitle__WEBPACK_IMPORTED_MODULE_11__[\"default\"], null, \"INFO\"), responseMessage));\n}\n\n//# sourceURL=webpack://online_order_application/./src/componets/UploadAttachment.js?");

/***/ })

}]);